<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 850" width="1200" height="850">
  <defs>
    <style>
      .box { fill: white; stroke: #333; stroke-width: 2; }
      .title { font-family: Arial, sans-serif; font-size: 22px; font-weight: bold; fill: #1565C0; }
      .section { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1976D2; }
      .label { font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: #333; }
      .smalltext { font-family: Arial, sans-serif; font-size: 11px; fill: #555; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="title">Complete System Data Flow - Doctor Appointment System</text>
  
  <!-- Row 1: Authentication, Input, Processing -->
  <g id="row1">
    <!-- Authentication Module -->
    <rect x="50" y="70" width="320" height="150" class="box" fill="#FFF9C4" rx="8"/>
    <text x="210" y="95" text-anchor="middle" class="section">Authentication and Security</text>
    
    <rect x="70" y="110" width="130" height="35" class="box" fill="#FFF59D" rx="4"/>
    <text x="135" y="133" text-anchor="middle" class="label">User Login</text>
    
    <rect x="220" y="110" width="130" height="35" class="box" fill="#FFF59D" rx="4"/>
    <text x="285" y="133" text-anchor="middle" class="label">JWT Token</text>
    
    <rect x="70" y="160" width="130" height="35" class="box" fill="#FFF59D" rx="4"/>
    <text x="135" y="183" text-anchor="middle" class="label">Role Check</text>
    
    <rect x="220" y="160" width="130" height="35" class="box" fill="#FFF59D" rx="4"/>
    <text x="285" y="183" text-anchor="middle" class="label">Access Control</text>
    
    <!-- Input Module -->
    <rect x="410" y="70" width="320" height="150" class="box" fill="#FFCDD2" rx="8"/>
    <text x="570" y="95" text-anchor="middle" class="section">User Input Module</text>
    
    <rect x="430" y="110" width="130" height="35" class="box" fill="#FFAB91" rx="4"/>
    <text x="495" y="133" text-anchor="middle" class="label">Patient Actions</text>
    
    <rect x="580" y="110" width="130" height="35" class="box" fill="#FFAB91" rx="4"/>
    <text x="645" y="133" text-anchor="middle" class="label">Doctor Actions</text>
    
    <rect x="430" y="160" width="130" height="35" class="box" fill="#FFAB91" rx="4"/>
    <text x="495" y="183" text-anchor="middle" class="label">Admin Actions</text>
    
    <rect x="580" y="160" width="130" height="35" class="box" fill="#FFAB91" rx="4"/>
    <text x="645" y="183" text-anchor="middle" class="label">Validation</text>
    
    <!-- Processing Module -->
    <rect x="770" y="70" width="380" height="150" class="box" fill="#BBDEFB" rx="8"/>
    <text x="960" y="95" text-anchor="middle" class="section">Processing Module</text>
    
    <rect x="790" y="110" width="160" height="35" class="box" fill="#90CAF9" rx="4"/>
    <text x="870" y="133" text-anchor="middle" class="label">Business Logic</text>
    
    <rect x="970" y="110" width="160" height="35" class="box" fill="#90CAF9" rx="4"/>
    <text x="1050" y="133" text-anchor="middle" class="label">Data Validation</text>
    
    <rect x="790" y="160" width="160" height="35" class="box" fill="#90CAF9" rx="4"/>
    <text x="870" y="183" text-anchor="middle" class="label">Conflict Detection</text>
    
    <rect x="970" y="160" width="160" height="35" class="box" fill="#90CAF9" rx="4"/>
    <text x="1050" y="183" text-anchor="middle" class="label">Notification</text>
    
    <!-- Arrows between modules -->
    <line x1="370" y1="145" x2="410" y2="145" class="arrow"/>
    <line x1="730" y1="145" x2="770" y2="145" class="arrow"/>
  </g>
  
  <!-- Row 2: Database Layer -->
  <g id="database">
    <rect x="50" y="260" width="1100" height="200" class="box" fill="#E8F5E9" rx="8"/>
    <text x="600" y="285" text-anchor="middle" class="section">Database Layer - MySQL 8.0</text>
    
    <!-- Users Table -->
    <rect x="80" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="155" y="325" text-anchor="middle" class="label">Users Table</text>
    <text x="155" y="345" text-anchor="middle" class="smalltext">id, email</text>
    <text x="155" y="363" text-anchor="middle" class="smalltext">password_hash</text>
    <text x="155" y="381" text-anchor="middle" class="smalltext">name, phone</text>
    <text x="155" y="399" text-anchor="middle" class="smalltext">role, avatar</text>
    <text x="155" y="417" text-anchor="middle" class="smalltext">INDEX: email</text>
    
    <!-- Doctors Table -->
    <rect x="260" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="335" y="325" text-anchor="middle" class="label">Doctors Table</text>
    <text x="335" y="345" text-anchor="middle" class="smalltext">id, user_id</text>
    <text x="335" y="363" text-anchor="middle" class="smalltext">specialty</text>
    <text x="335" y="381" text-anchor="middle" class="smalltext">experience</text>
    <text x="335" y="399" text-anchor="middle" class="smalltext">rating, verified</text>
    <text x="335" y="417" text-anchor="middle" class="smalltext">INDEX: specialty</text>
    
    <!-- Appointments Table -->
    <rect x="440" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="515" y="325" text-anchor="middle" class="label">Appointments</text>
    <text x="515" y="345" text-anchor="middle" class="smalltext">id, patient_id</text>
    <text x="515" y="363" text-anchor="middle" class="smalltext">doctor_id</text>
    <text x="515" y="381" text-anchor="middle" class="smalltext">date_time</text>
    <text x="515" y="399" text-anchor="middle" class="smalltext">status, reason</text>
    <text x="515" y="417" text-anchor="middle" class="smalltext">UNIQUE: dr+time</text>
    
    <!-- Availability Table -->
    <rect x="620" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="695" y="325" text-anchor="middle" class="label">Availability</text>
    <text x="695" y="345" text-anchor="middle" class="smalltext">id, doctor_id</text>
    <text x="695" y="363" text-anchor="middle" class="smalltext">day_of_week</text>
    <text x="695" y="381" text-anchor="middle" class="smalltext">start_time</text>
    <text x="695" y="399" text-anchor="middle" class="smalltext">end_time</text>
    <text x="695" y="417" text-anchor="middle" class="smalltext">INDEX: dr+day</text>
    
    <!-- Reviews Table -->
    <rect x="800" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="875" y="325" text-anchor="middle" class="label">Reviews</text>
    <text x="875" y="345" text-anchor="middle" class="smalltext">id, doctor_id</text>
    <text x="875" y="363" text-anchor="middle" class="smalltext">patient_id</text>
    <text x="875" y="381" text-anchor="middle" class="smalltext">rating</text>
    <text x="875" y="399" text-anchor="middle" class="smalltext">comment</text>
    <text x="875" y="417" text-anchor="middle" class="smalltext">INDEX: doctor</text>
    
    <!-- Audit Logs Table -->
    <rect x="980" y="305" width="150" height="130" class="box" fill="#A5D6A7" rx="4"/>
    <text x="1055" y="325" text-anchor="middle" class="label">Audit Logs</text>
    <text x="1055" y="345" text-anchor="middle" class="smalltext">id, user_id</text>
    <text x="1055" y="363" text-anchor="middle" class="smalltext">action</text>
    <text x="1055" y="381" text-anchor="middle" class="smalltext">entity_type</text>
    <text x="1055" y="399" text-anchor="middle" class="smalltext">ip_address</text>
    <text x="1055" y="417" text-anchor="middle" class="smalltext">INDEX: time</text>
    
    <!-- Arrow from processing to database -->
    <line x1="960" y1="220" x2="600" y2="260" class="arrow"/>
  </g>
  
  <!-- Row 3: Output Module -->
  <g id="output">
    <rect x="50" y="500" width="1100" height="150" class="box" fill="#C8E6C9" rx="8"/>
    <text x="600" y="525" text-anchor="middle" class="section">Output Module</text>
    
    <rect x="80" y="545" width="190" height="80" class="box" fill="#81C784" rx="4"/>
    <text x="175" y="570" text-anchor="middle" class="label">JSON Response</text>
    <text x="175" y="590" text-anchor="middle" class="smalltext">HTTP 200/201/400</text>
    <text x="175" y="608" text-anchor="middle" class="smalltext">Data Transfer Objects</text>
    
    <rect x="300" y="545" width="190" height="80" class="box" fill="#81C784" rx="4"/>
    <text x="395" y="570" text-anchor="middle" class="label">Real-time Updates</text>
    <text x="395" y="590" text-anchor="middle" class="smalltext">WebSocket Messages</text>
    <text x="395" y="608" text-anchor="middle" class="smalltext">STOMP Protocol</text>
    
    <rect x="520" y="545" width="190" height="80" class="box" fill="#81C784" rx="4"/>
    <text x="615" y="570" text-anchor="middle" class="label">UI Updates</text>
    <text x="615" y="590" text-anchor="middle" class="smalltext">React State Update</text>
    <text x="615" y="608" text-anchor="middle" class="smalltext">Component Re-render</text>
    
    <rect x="740" y="545" width="190" height="80" class="box" fill="#81C784" rx="4"/>
    <text x="835" y="570" text-anchor="middle" class="label">Notifications</text>
    <text x="835" y="590" text-anchor="middle" class="smalltext">Toast Messages</text>
    <text x="835" y="608" text-anchor="middle" class="smalltext">Success/Error Alerts</text>
    
    <rect x="960" y="545" width="190" height="80" class="box" fill="#81C784" rx="4"/>
    <text x="1055" y="570" text-anchor="middle" class="label">Export Files</text>
    <text x="1055" y="590" text-anchor="middle" class="smalltext">CSV / Excel / PDF</text>
    <text x="1055" y="608" text-anchor="middle" class="smalltext">Reports and Analytics</text>
    
    <!-- Arrow from database to output -->
    <line x1="600" y1="460" x2="600" y2="500" class="arrow"/>
  </g>
  
  <!-- Row 4: Tech Stack and Performance -->
  <g id="footer">
    <!-- Tech Stack -->
    <rect x="50" y="690" width="550" height="130" class="box" fill="#F5F5F5" rx="4"/>
    <text x="325" y="715" text-anchor="middle" class="label">Technology Stack</text>
    <text x="325" y="738" text-anchor="middle" class="smalltext">Frontend: React 18 + Vite + Material-UI + Framer Motion + Axios</text>
    <text x="325" y="758" text-anchor="middle" class="smalltext">Backend: Spring Boot 3.2 + Spring Security + JWT + WebSocket</text>
    <text x="325" y="778" text-anchor="middle" class="smalltext">Database: MySQL 8.0 + Flyway Migrations + HikariCP Pool</text>
    <text x="325" y="798" text-anchor="middle" class="smalltext">Testing: JUnit + Mockito + Vitest + Cypress + JQwik</text>
    
    <!-- Performance Metrics -->
    <rect x="650" y="690" width="500" height="130" class="box" fill="#E3F2FD" rx="4"/>
    <text x="900" y="715" text-anchor="middle" class="label">Performance Metrics</text>
    <text x="900" y="738" text-anchor="middle" class="smalltext">Average Response: ~30ms | Database Query: ~15ms | JWT: ~5ms</text>
    <text x="900" y="758" text-anchor="middle" class="smalltext">WebSocket Latency: ~10ms | Connection Pool: 10 max, 5 min idle</text>
    <text x="900" y="778" text-anchor="middle" class="smalltext">Concurrent Users: 1000+ | Requests/sec: 500+ | Pooled Connections</text>
    <text x="900" y="798" text-anchor="middle" class="smalltext">Security: BCrypt + JWT + HTTPS + CORS + Rate Limiting + Audit Logs</text>
  </g>
</svg>
